{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "value": "westus2"
    },
    "networkInterfaceName": {
      "value": "c2vm426"
    },
    "networkSecurityGroupName": {
      "value": "C2VM-nsg"
    },
    "networkSecurityGroupRules": {
      "value": [
        {
          "name": "AllowCidrBlockCustom22Inbound",
          "properties": {
            "priority": 1000,
            "protocol": "TCP",
            "access": "Allow",
            "direction": "Inbound",
            "sourceApplicationSecurityGroups": [],
            "destinationApplicationSecurityGroups": [],
            "sourceAddressPrefix": "<YOUR_IP_ADDRESS_HERE>",
            "sourcePortRange": "*",
            "destinationAddressPrefix": "*",
            "destinationPortRange": "22"
          }
        },
        {
          "name": "AllowCidrBlockInternal80Inbound",
          "properties": {
            "priority": 1010,
            "protocol": "TCP",
            "access": "Allow",
            "direction": "Inbound",
            "sourceApplicationSecurityGroups": [],
            "destinationApplicationSecurityGroups": [],
            "sourceAddressPrefix": "10.0.0.0/8",
            "sourcePortRange": "*",
            "destinationAddressPrefix": "*",
            "destinationPortRange": "80"
          }
        }
      ]
    },
    "subnetName": {
      "value": "default"
    },
    "virtualNetworkName": {
      "value": "C2VM-vnet"
    },
    "addressPrefixes": {
      "value": [
        "10.0.0.0/16"
      ]
    },
    "subnets": {
      "value": [
        {
          "name": "default",
          "properties": {
            "addressPrefix": "10.0.0.0/24"
          }
        }
      ]
    },
    "publicIpAddressName": {
      "value": "C2VM-ip"
    },
    "publicIpAddressType": {
      "value": "Static"
    },
    "dnsLabelPrefix": {
      "value": "<YOUR_DNS_LABEL_HERE>"
    },
    "publicIpAddressSku": {
      "value": "Standard"
    },
    "pipDeleteOption": {
      "value": "Delete"
    },
    "virtualMachineName": {
      "value": "C2VM"
    },
    "virtualMachineComputerName": {
      "value": "C2VM"
    },
    "virtualMachineRG": {
      "value": "C2VMRG"
    },
    "osDiskType": {
      "value": "Standard_LRS"
    },
    "osDiskDeleteOption": {
      "value": "Delete"
    },
    "virtualMachineSize": {
      "value": "Standard_B1s"
    },
    "nicDeleteOption": {
      "value": "Delete"
    },
    "hibernationEnabled": {
      "value": false
    },
    "adminUsername": {
      "value": "ubuntu"
    },
    "adminPublicKey": {
      "value": "<YOUR_PUBLIC_KEY_HERE>"
    },
    "enablePeriodicAssessment": {
      "value": "ImageDefault"
    },
    "userData": {
      "value": "IyEvYmluL2Jhc2gKU0xJVkVSX1ZFUlNJT049djEuNS40MwoKYXB0IHVwZGF0ZQphcHQgdXBncmFkZSAteQphcHQgaW5zdGFsbCBuZXQtdG9vbHMgLXkKYXB0IGluc3RhbGwgYXBhY2hlMiAteQphcHQgaW5zdGFsbCBwaHAgLXkKYXB0IGluc3RhbGwgbGliYXBhY2hlMi1tb2QtcGhwIC15CmFwdCBpbnN0YWxsIHB5dGhvbi1pcy1weXRob24zIC15Cm1rZGlyIC1wIC9vcHQvc2xpdmVyCndnZXQgaHR0cHM6Ly9naXRodWIuY29tL0Jpc2hvcEZveC9zbGl2ZXIvcmVsZWFzZXMvZG93bmxvYWQvJFNMSVZFUl9WRVJTSU9OL3NsaXZlci1zZXJ2ZXJfbGludXggLU8gL29wdC9zbGl2ZXIvc2xpdmVyLXNlcnZlcl9saW51eF8kU0xJVkVSX1ZFUlNJT04Kd2dldCBodHRwczovL2dpdGh1Yi5jb20vQmlzaG9wRm94L3NsaXZlci9yZWxlYXNlcy9kb3dubG9hZC8kU0xJVkVSX1ZFUlNJT04vc2xpdmVyLWNsaWVudF9saW51eCAtTyAvb3B0L3NsaXZlci9zbGl2ZXItY2xpZW50X2xpbnV4XyRTTElWRVJfVkVSU0lPTgpjaG1vZCAreCAvb3B0L3NsaXZlci9zbGl2ZXItKgpybSAtZiAvb3B0L3NsaXZlci9zbGl2ZXItY2xpZW50CnJtIC1mIC9vcHQvc2xpdmVyL3NsaXZlci1zZXJ2ZXIKbG4gLXMgL29wdC9zbGl2ZXIvc2xpdmVyLWNsaWVudF9saW51eF8kU0xJVkVSX1ZFUlNJT04gL29wdC9zbGl2ZXIvc2xpdmVyLWNsaWVudApsbiAtcyAvb3B0L3NsaXZlci9zbGl2ZXItc2VydmVyX2xpbnV4XyRTTElWRVJfVkVSU0lPTiAvb3B0L3NsaXZlci9zbGl2ZXItc2VydmVyCgplY2hvICcxMjcuMC4wLjEgYmFja2VuZCcgPj4gL2V0Yy9ob3N0cwoKY2F0ID4gL2V0Yy9hcGFjaGUyL3NpdGVzLWF2YWlsYWJsZS9zc2wtZm9yd2FyZC1odHRwLmNvbmYgPDwnZW5kbXNnJwo8VmlydHVhbEhvc3QgMC4wLjAuMDo0NDM+CgogICAgU1NMRW5naW5lIG9uCgogICAgU1NMQ2VydGlmaWNhdGVGaWxlICAgICAgL2V0Yy9zc2wvY2VydHMvc3NsLWNlcnQtc25ha2VvaWwucGVtCiAgICBTU0xDZXJ0aWZpY2F0ZUtleUZpbGUgICAvZXRjL3NzbC9wcml2YXRlL3NzbC1jZXJ0LXNuYWtlb2lsLmtleQoKICAgIFJld3JpdGVFbmdpbmUgT24KCiAgICA8RGlyZWN0b3J5IC92YXIvd3d3L2h0bWw+CiAgICAgICAgT3B0aW9ucyBGb2xsb3dTeW1MaW5rcwogICAgICAgIEFsbG93T3ZlcnJpZGUgQWxsCiAgICAgICAgUmVxdWlyZSBhbGwgZ3JhbnRlZAogICAgICAgIEZpbGVFVGFnIE5vbmUKICAgIDwvRGlyZWN0b3J5PgoKICAgIFByb3h5UHJlc2VydmVIb3N0IE9uCgogICAgU2VydmVyTmFtZSBsb2NhbGhvc3QKICAgIERvY3VtZW50Um9vdCAvdmFyL3d3dy9odG1sCgogICAgRXJyb3JMb2cgJHtBUEFDSEVfTE9HX0RJUn0vZXJyb3IubG9nCiAgICBDdXN0b21Mb2cgJHtBUEFDSEVfTE9HX0RJUn0vYWNjZXNzLmxvZyAiJWggXCIle1gtRm9yd2FyZGVkLUZvcn1pXCIgXCIle2ZvcndhcmRlZH1pXCIgICV0IFwiJXJcIiAlPnMgJWIgJXtIb3N0fWkgXCIle1JlZmVyZXJ9aVwiIFwiJXtVc2VyLWFnZW50fWlcIiBzc2wiCgogICAgU2VydmVyU2lnbmF0dXJlIE9mZgoKPC9WaXJ0dWFsSG9zdD4KZW5kbXNnCgoKCmNhdCA+IC9ldGMvYXBhY2hlMi9zaXRlcy1hdmFpbGFibGUvZm9yd2FyZC1odHRwLmNvbmYgPDwnZW5kbXNnJwo8VmlydHVhbEhvc3QgMC4wLjAuMDo4MD4KICAgIFJld3JpdGVFbmdpbmUgT24KCiAgICA8RGlyZWN0b3J5IC92YXIvd3d3L2h0bWw+CiAgICAgICAgT3B0aW9ucyBGb2xsb3dTeW1MaW5rcwogICAgICAgIEFsbG93T3ZlcnJpZGUgQWxsCiAgICAgICAgUmVxdWlyZSBhbGwgZ3JhbnRlZAogICAgICAgIEZpbGVFVGFnIE5vbmUKICAgIDwvRGlyZWN0b3J5PgoKICAgIFByb3h5UHJlc2VydmVIb3N0IE9uCgogICAgU2VydmVyTmFtZSBsb2NhbGhvc3QKICAgIERvY3VtZW50Um9vdCAvdmFyL3d3dy9odG1sCgogICAgRXJyb3JMb2cgJHtBUEFDSEVfTE9HX0RJUn0vZXJyb3IubG9nCiAgICBDdXN0b21Mb2cgJHtBUEFDSEVfTE9HX0RJUn0vYWNjZXNzLmxvZyAiJWggXCIle1gtRm9yd2FyZGVkLUZvcn1pXCIgXCIle2ZvcndhcmRlZH1pXCIgICV0IFwiJXJcIiAlPnMgJWIgJXtIb3N0fWkgXCIle1JlZmVyZXJ9aVwiIFwiJXtVc2VyLWFnZW50fWlcIiIKCgogICAgU2VydmVyU2lnbmF0dXJlIE9mZgoKPC9WaXJ0dWFsSG9zdD4KZW5kbXNnCgphMmVubW9kIHByb3h5X2h0dHAgcHJveHkgcmV3cml0ZQphMmRpc3NpdGUgMDAwLWRlZmF1bHQKYTJlbnNpdGUgZm9yd2FyZC1odHRwCgpzeXN0ZW1jdGwgcmVzdGFydCBhcGFjaGUyCgojIGNyZWF0ZSBhIG11bHRpcGxheSB1c2VyIGZpbGUgZm9yIGxvY2FsIGNvbm5lY3Rpb24KU0xJVkVSX1JPT1RfRElSPS9vcHQvc2xpdmVyLyAvb3B0L3NsaXZlci9zbGl2ZXItc2VydmVyIG9wZXJhdG9yIC0tbmFtZSBhZG1pbiAtLWxob3N0IDEyNy4wLjAuMSAtLXNhdmUgL29wdC9zbGl2ZXIvYWRtaW5fMTI3LjAuMC4xLmNmZwoKCmNhdCA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc2xpdmVyLnNlcnZpY2UgPDwnZW5kbXNnJwpbVW5pdF0KRGVzY3JpcHRpb249U2xpdmVyCkFmdGVyPW5ldHdvcmsudGFyZ2V0ClN0YXJ0TGltaXRJbnRlcnZhbFNlYz0wCgpbU2VydmljZV0KRW52aXJvbm1lbnQ9IlNMSVZFUl9ST09UX0RJUj0vb3B0L3NsaXZlciIKVHlwZT1zaW1wbGUKUmVzdGFydD1vbi1mYWlsdXJlClJlc3RhcnRTZWM9MwpVc2VyPXJvb3QKRXhlY1N0YXJ0PS9vcHQvc2xpdmVyL3NsaXZlci1zZXJ2ZXIgZGFlbW9uCgpbSW5zdGFsbF0KV2FudGVkQnk9bXVsdGktdXNlci50YXJnZXQKZW5kbXNnCgoKc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQKCnN5c3RlbWN0bCBzdGFydCBzbGl2ZXIKc3lzdGVtY3RsIHN0YXR1cyBzbGl2ZXIKc3lzdGVtY3RsIGVuYWJsZSBzbGl2ZXIKCgpjYXQgPiAvdmFyL3d3dy9odG1sL2luZGV4Lmh0bWwgPDwnZW5kbXNnJwo8aHRtbD4KPC9odG1sPgplbmRtc2cKCgoKCmNhdCA+IC92YXIvd3d3L2h0bWwvcm9ib3RzLnR4dCA8PCdlbmRtc2cnClVzZXItYWdlbnQ6ICoKRGlzYWxsb3c6IC8KZW5kbXNnCgoKCmNhdCA+IC92YXIvd3d3L2h0bWwvLmh0YWNjZXNzIDw8J2VuZG1zZycKUmV3cml0ZUVuZ2luZSBvbgoKIyByZXdyaXRlIC8gdG8gaW5kZXguaHRtbApSZXdyaXRlUnVsZSBeJCAvaW5kZXguaHRtbCBbTF0KCiMgc2VydmUgZXhpc3RpbmcgZXh0ZW5zaW9ubGVzcyBmaWxlcyB0aGF0IGhhdmUgLnBocCBleHRlbnNpb25zClJld3JpdGVDb25kICV7UkVRVUVTVF9GSUxFTkFNRX0gIS1mClJld3JpdGVDb25kICV7UkVRVUVTVF9GSUxFTkFNRX0gIS1kClJld3JpdGVDb25kICV7UkVRVUVTVF9GSUxFTkFNRX0ucGhwIC1mClJld3JpdGVSdWxlIF4oLiopJCAkMS5waHAgW0xdCgojIHNlcnZlIGZpbGVzIHRoYXQgZXhpc3QKUmV3cml0ZUNvbmQgLyV7UkVRVUVTVF9GSUxFTkFNRX0gLWYKUmV3cml0ZVJ1bGUgLj8gLSBbTF0KCiMgUmVzcG9uZCB0byBrbm93biBjb21tYW5kIGxpbmUvc2Nhbm5lciB1c2VyIGFnZW50cyB3aXRoIDQwNApSZXdyaXRlQ29uZCAle0hUVFBfVVNFUl9BR0VOVH0gY3VybHx3Z2V0fG1hc3NjYW58cHl0aG9ufHpncmFifG1vYmlsZXxjZW5zeXN8aGVsbG98b2todHRwfHNjYW5zfHNwaWRlcnxib3QgW05DXQpSZXdyaXRlUnVsZSAuKiAtIFtSPTQwNF0KCiMgU2VuZCByZW1haW5pbmcgcmVxdWVzdHMgdG8gcG9ydCA4ODg4IG9uIGJhY2tlbmQgaG9zdApSZXdyaXRlUnVsZSBeLiokIGh0dHA6Ly9iYWNrZW5kOjg4ODgle1JFUVVFU1RfVVJJfSBbUCxORV0KZW5kbXNnCgoKTVJBTkRPTT1gdHIgLWRjIEEtWmEtejAtOSA8L2Rldi91cmFuZG9tIHwgaGVhZCAtYyAyNDsgZWNob2AKCgpjYXQgPiAvdmFyL3d3dy9odG1sLyRNUkFORE9NLnBocCA8PCdlbmRtc2cnCjw/cGhwCmVjaG8gIj1SRVFVRVNUIEhFQURFUlM9XG5cbiI7CiRoZWFkZXJzID0gYXBhY2hlX3JlcXVlc3RfaGVhZGVycygpOwoKZm9yZWFjaCAoJGhlYWRlcnMgYXMgJGhlYWRlciA9PiAkdmFsdWUpIHsKCSAgICBlY2hvICIkaGVhZGVyOiAkdmFsdWUgXG4iOwp9CgplY2hvICJcblxuPUFQQUNIRSBWQVJJQUJMRVM9XG4iOwoKZWNobyAiSFRUUCBIRUFERVJTXG4iOwokSFRUUF9BQ0NFUFQgPSBnZXRlbnYoJ0hUVFBfQUNDRVBUJyk7CmVjaG8gIkhUVFBfQUNDRVBUIDogJEhUVFBfQUNDRVBUXG4iOwokSFRUUF9DT09LSUUgPSBnZXRlbnYoJ0hUVFBfQ09PS0lFJyk7CmVjaG8gIkhUVFBfQ09PS0lFIDogJEhUVFBfQ09PS0lFXG4iOwokSFRUUF9GT1JXQVJERUQgPSBnZXRlbnYoJ0hUVFBfRk9SV0FSREVEJyk7CmVjaG8gIkhUVFBfRk9SV0FSREVEIDogJEhUVFBfRk9SV0FSREVEXG4iOwokSFRUUF9YX0ZPUldBUkRFRF9GT1IgPSBnZXRlbnYoJ0hUVFBfWF9GT1JXQVJERURfRk9SJyk7CmVjaG8gIkhUVFBfWF9GT1JXQVJERURfRk9SIDogJEhUVFBfWF9GT1JXQVJERURfRk9SXG4iOwokSFRUUF9IT1NUID0gZ2V0ZW52KCdIVFRQX0hPU1QnKTsKZWNobyAiSFRUUF9IT1NUIDogJEhUVFBfSE9TVFxuIjsKJEhUVFBfUFJPWFlfQ09OTkVDVElPTiA9IGdldGVudignSFRUUF9QUk9YWV9DT05ORUNUSU9OJyk7CmVjaG8gIkhUVFBfUFJPWFlfQ09OTkVDVElPTiA6ICRIVFRQX1BST1hZX0NPTk5FQ1RJT05cbiI7CiRIVFRQX1JFRkVSRVIgPSBnZXRlbnYoJ0hUVFBfUkVGRVJFUicpOwplY2hvICJIVFRQX1JFRkVSRVIgOiAkSFRUUF9SRUZFUkVSXG4iOwokSFRUUF9VU0VSX0FHRU5UID0gZ2V0ZW52KCdIVFRQX1VTRVJfQUdFTlQnKTsKZWNobyAiSFRUUF9VU0VSX0FHRU5UIDogJEhUVFBfVVNFUl9BR0VOVFxuIjsKCmVjaG8gIlxuXG49Q09OTkVDVElPTiAmIFJFUVVFU1Q9XG4iOwokQVVUSF9UWVBFID0gZ2V0ZW52KCdBVVRIX1RZUEUnKTsKZWNobyAiQVVUSF9UWVBFIDogJEFVVEhfVFlQRVxuIjsKJENPTk5fUkVNT1RFX0FERFIgPSBnZXRlbnYoJ0NPTk5fUkVNT1RFX0FERFInKTsKZWNobyAiQ09OTl9SRU1PVEVfQUREUiA6ICRDT05OX1JFTU9URV9BRERSXG4iOwokQ09OVEVYVF9QUkVGSVggPSBnZXRlbnYoJ0NPTlRFWFRfUFJFRklYJyk7CmVjaG8gIkNPTlRFWFRfUFJFRklYIDogJENPTlRFWFRfUFJFRklYXG4iOwokSVBWNiA9IGdldGVudignSVBWNicpOwplY2hvICJJUFY2IDogJElQVjZcbiI7CiRQQVRIX0lORk8gPSBnZXRlbnYoJ1BBVEhfSU5GTycpOwplY2hvICJQQVRIX0lORk8gOiAkUEFUSF9JTkZPXG4iOwokUVVFUllfU1RSSU5HID0gZ2V0ZW52KCdRVUVSWV9TVFJJTkcnKTsKZWNobyAiUVVFUllfU1RSSU5HIDogJFFVRVJZX1NUUklOR1xuIjsKJFJFTU9URV9BRERSID0gZ2V0ZW52KCdSRU1PVEVfQUREUicpOwplY2hvICJSRU1PVEVfQUREUiA6ICRSRU1PVEVfQUREUlxuIjsKJFJFTU9URV9IT1NUID0gZ2V0ZW52KCdSRU1PVEVfSE9TVCcpOwplY2hvICJSRU1PVEVfSE9TVCA6ICRSRU1PVEVfSE9TVFxuIjsKJFJFTU9URV9JREVOVCA9IGdldGVudignUkVNT1RFX0lERU5UJyk7CmVjaG8gIlJFTU9URV9JREVOVCA6ICRSRU1PVEVfSURFTlRcbiI7CiRSRU1PVEVfUE9SVCA9IGdldGVudignUkVNT1RFX1BPUlQnKTsKZWNobyAiUkVNT1RFX1BPUlQgOiAkUkVNT1RFX1BPUlRcbiI7CiRSRU1PVEVfVVNFUiA9IGdldGVudignUkVNT1RFX1VTRVInKTsKZWNobyAiUkVNT1RFX1VTRVIgOiAkUkVNT1RFX1VTRVJcbiI7CiRSRVFVRVNUX01FVEhPRCA9IGdldGVudignUkVRVUVTVF9NRVRIT0QnKTsKZWNobyAiUkVRVUVTVF9NRVRIT0QgOiAkUkVRVUVTVF9NRVRIT0RcbiI7CgoKZWNobyAiXG5cbj1TUEVDSUFMUz1cbiI7CiRDT05OX1JFTU9URV9BRERSID0gZ2V0ZW52KCdDT05OX1JFTU9URV9BRERSJyk7CmVjaG8gIkNPTk5fUkVNT1RFX0FERFIgOiAkQ09OTl9SRU1PVEVfQUREUlxuIjsKJEhUVFBTID0gZ2V0ZW52KCdIVFRQUycpOwplY2hvICJIVFRQUyA6ICRIVFRQU1xuIjsKJElTX1NVQlJFUSA9IGdldGVudignSVNfU1VCUkVRJyk7CmVjaG8gIklTX1NVQlJFUSA6ICRJU19TVUJSRVFcbiI7CiRSRU1PVEVfQUREUiA9IGdldGVudignUkVNT1RFX0FERFInKTsKZWNobyAiUkVNT1RFX0FERFIgOiAkUkVNT1RFX0FERFJcbiI7CiRSRVFVRVNUX0ZJTEVOQU1FID0gZ2V0ZW52KCdSRVFVRVNUX0ZJTEVOQU1FJyk7CmVjaG8gIlJFUVVFU1RfRklMRU5BTUUgOiAkUkVRVUVTVF9GSUxFTkFNRVxuIjsKJFJFUVVFU1RfU0NIRU1FID0gZ2V0ZW52KCdSRVFVRVNUX1NDSEVNRScpOwplY2hvICJSRVFVRVNUX1NDSEVNRSA6ICRSRVFVRVNUX1NDSEVNRVxuIjsKJFJFUVVFU1RfVVJJID0gZ2V0ZW52KCdSRVFVRVNUX1VSSScpOwplY2hvICJSRVFVRVNUX1VSSSA6ICRSRVFVRVNUX1VSSVxuIjsKJFRIRV9SRVFVRVNUID0gZ2V0ZW52KCdUSEVfUkVRVUVTVCcpOwplY2hvICJUSEVfUkVRVUVTVCA6ICRUSEVfUkVRVUVTVFxuIjsKCmVjaG8gIlxuXG49REFUQT1cbiI7CnRyeSB7CmVjaG8gIlBhcnNlZDpcbiI7CnByaW50X3IoJF9QT1NUKTsKZWNobyAiXG4iOwp9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCn0KdHJ5IHsKZWNobyAiUmF3IChiYXNlNjQgZW5jb2RlZCk6XG4iOwplY2hvIGJhc2U2NF9lbmNvZGUoZmlsZV9nZXRfY29udGVudHMoJ3BocDovL2lucHV0JykpOwp9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKCn0KCmVjaG8gIlxuXG5MZW5ndGggb2YgaW5wdXRcbiI7CmVjaG8gc3RybGVuKGZpbGVfZ2V0X2NvbnRlbnRzKCdwaHA6Ly9pbnB1dCcpKTsKCmVjaG8gIlxuXG5TaGEgb2YgaW5wdXRcbiI7CmVjaG8gc2hhMShmaWxlX2dldF9jb250ZW50cygncGhwOi8vaW5wdXQnKSk7CgplY2hvICJcblxuRG9uZVxuXG4iOwoKPz4KZW5kbXNnCgpta2RpciAtcCAvaG9tZS91YnVudHUvLnNsaXZlci1jbGllbnQvY29uZmlncwptdiAvb3B0L3NsaXZlci9hZG1pbl8xMjcuMC4wLjEuY2ZnIC9ob21lL3VidW50dS8uc2xpdmVyLWNsaWVudC9jb25maWdzLwpjaG93biB1YnVudHU6dWJ1bnR1IC1SIC9ob21lL3VidW50dS8uc2xpdmVyLWNsaWVudApzdWRvIC11IHVidW50dSBIT01FPS9ob21lL3VidW50dSAvYmluL2Jhc2ggLWMgImVjaG8gaHR0cCAtbCA4ODg4IC1wIHwgL29wdC9zbGl2ZXIvc2xpdmVyLWNsaWVudCIKCmVjaG8gIlRlc3Qgc2NyaXB0IGF0ICRNUkFORE9NLnBocCIgPiAvaG9tZS91YnVudHUvc2V0dXBkb25lCg=="
    }
  }
}
